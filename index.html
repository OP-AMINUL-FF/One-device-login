<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëë ULTRA PRO MAX - ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* ‡¶≤‡¶ó‡¶ø‡¶® ‡¶™‡ßá‡¶ú ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header h1 {
            color: #fff;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .login-header p {
            color: #00d4ff;
            font-size: 0.9em;
        }
        
        .login-form .form-group {
            margin-bottom: 20px;
        }
        
        .login-form input {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 1em;
        }
        
        .login-form input::placeholder {
            color: rgba(255,255,255,0.5);
        }
        
        .login-form button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #00d4ff, #0066ff);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .login-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,212,255,0.4);
        }
        
        /* ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            display: none;
        }
        
        .header {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .header h1 {
            color: #00d4ff;
            font-size: 1.8em;
        }
        
        .user-info {
            color: #fff;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .badge {
            background: linear-gradient(135deg, #00d4ff, #0066ff);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .logout-btn {
            background: rgba(255,0,0,0.2);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
            padding: 8px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: #ff6b6b;
            color: #fff;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
        }
        
        .stat-card h3 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        
        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
        }
        
        .card h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #00d4ff;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ddd;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: #fff;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #00d4ff;
        }
        
        .btn {
            background: linear-gradient(135deg, #00d4ff, #0066ff);
            color: #fff;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            width: 100%;
            transition: transform 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ff0000);
        }
        
        .tables-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .table-container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .table-container h2 {
            color: #00d4ff;
            margin-bottom: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        th {
            color: #00d4ff;
        }
        
        .status-active {
            color: #00ff00;
        }
        
        .status-expired {
            color: #ff0000;
        }
        
        .small-btn {
            padding: 5px 10px;
            background: rgba(255,0,0,0.2);
            border: 1px solid #ff0000;
            border-radius: 5px;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 0.8em;
        }
        
        .small-btn:hover {
            background: #ff0000;
            color: #fff;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .stats-grid, .main-content, .tables-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶™‡ßá‡¶ú -->
    <div id="loginPage" class="login-container">
        <div class="login-header">
            <h1>üëë ULTRA PRO MAX</h1>
            <p>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ v2.0</p>
        </div>
        <div class="login-form">
            <div class="form-group">
                <input type="text" id="adminUsername" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ">
            </div>
            <div class="form-group">
                <input type="password" id="adminPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°">
            </div>
            <button onclick="adminLogin()">‡¶≤‡¶ó‡¶ø‡¶®</button>
        </div>
        <div id="loginMessage" style="color: #ff6b6b; text-align: center; margin-top: 15px;"></div>
    </div>

    <!-- ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã) -->
    <div id="dashboard" class="dashboard">
        <div class="header">
            <h1>üëë ULTRA PRO MAX DASHBOARD</h1>
            <div class="user-info">
                <span class="badge" id="userRoleBadge">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</span>
                <span id="usernameDisplay">admin54</span>
                <span class="logout-btn" onclick="logout()">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</span>
            </div>
        </div>

        <!-- ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>‡¶Æ‡ßã‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
                <div class="number" id="totalUsers">0</div>
            </div>
            <div class="stat-card">
                <h3>‡¶Æ‡ßã‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞</h3>
                <div class="number" id="totalResellers">0</div>
            </div>
            <div class="stat-card">
                <h3>‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
                <div class="number" id="activeUsers">0</div>
            </div>
            <div class="stat-card">
                <h3>‡¶è‡¶ï‡ßç‡¶∏‡¶™‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶°</h3>
                <div class="number" id="expiredUsers">0</div>
            </div>
        </div>

        <!-- JSONBin ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® (‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã) -->
        <div id="jsonbinConfig" class="hidden">
            <input type="text" id="binId" value="6995dc7fd0ea881f40c440b9">
            <input type="text" id="masterKey" value="$2a$10$LQXgZvaxJNdPrYE3Ez/tHe09U9/NFnBYpAzlNBPeFLBG51CluFTB2">
        </div>

        <!-- ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü -->
        <div class="main-content">
            <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®: ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø -->
            <div class="card" id="createResellerCard">
                <h2>üë• ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®)</h2>
                <div class="form-group">
                    <label>‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ:</label>
                    <input type="text" id="resellerUsername" placeholder="reseller_name">
                </div>
                <div class="form-group">
                    <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°:</label>
                    <input type="text" id="resellerPassword" value="reseller123">
                </div>
                <div class="form-group">
                    <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü:</label>
                    <input type="number" id="resellerUserLimit" value="5" min="1" max="100">
                </div>
                <button class="btn" onclick="createReseller()">‚úÖ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>

            <!-- ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞: ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø -->
            <div class="card" id="createUserCard">
                <h2>üë§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø</h2>
                <div class="form-group">
                    <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ:</label>
                    <input type="text" id="username" placeholder="username">
                </div>
                <div class="form-group">
                    <label>‡¶è‡¶ï‡ßç‡¶∏‡¶™‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                    <input type="date" id="expireDate">
                </div>
                <div class="form-group">
                    <label>‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü:</label>
                    <select id="deviceLimit">
                        <option value="1">‡ßß‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                        <option value="2">‡ß®‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                        <option value="3">‡ß©‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                        <option value="5">‡ß´‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                        <option value="999">‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶°</option>
                    </select>
                </div>
                <button class="btn" onclick="createUser()">‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <div id="userLimitMessage" style="color: #ffaa00; margin-top: 10px;"></div>
            </div>
        </div>

        <!-- ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div class="tables-section">
            <!-- ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü -->
            <div class="table-container">
                <h2>üë• ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
                <table id="resellerTable">
                    <thead>
                        <tr>
                            <th>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</th>
                            <th>‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü</th>
                            <th>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody id="resellerTableBody">
                        <tr><td colspan="4">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü -->
            <div class="table-container">
                <h2>üìã ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
                <table id="userTable">
                    <thead>
                        <tr>
                            <th>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</th>
                            <th>‡¶è‡¶ï‡ßç‡¶∏‡¶™‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞</th>
                            <th>‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</th>
                            <th>‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶ü‡¶∞</th>
                            <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody id="userTableBody">
                        <tr><td colspan="6">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
        const BIN_ID = "6995dc7fd0ea881f40c440b9";
        const MASTER_KEY = "$2a$10$LQXgZvaxJNdPrYE3Ez/tHe09U9/NFnBYpAzlNBPeFLBG51CluFTB2";
        
        let currentUser = null;
        let usersData = { users: [], resellers: [] };
        
        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡ßç‡¶∞‡ßá‡¶°‡ßá‡¶®‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤
        const ADMIN_USERNAME = "admin54";
        const ADMIN_PASSWORD = "admin54";

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º
        window.onload = function() {
            checkLogin();
        };

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®/‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶ø‡¶®
        async function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            // ‡¶Ü‡¶ó‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
            await loadDataForLogin();
            
            // ‡ßß. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ö‡ßá‡¶ï
            if(username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                currentUser = {
                    username: username,
                    role: 'admin',
                    userLimit: 999999
                };
                
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                loadDashboard();
                return;
            }
            
            // ‡ß®. ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï
            if(usersData.resellers && usersData.resellers.length > 0) {
                const reseller = usersData.resellers.find(r => r.username === username && r.password === password);
                
                if(reseller) {
                    currentUser = {
                        username: reseller.username,
                        role: 'reseller',
                        userLimit: reseller.userLimit
                    };
                    
                    sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                    loadDashboard();
                    return;
                }
            }
            
            // ‡ß©. ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶®‡¶æ ‡¶Æ‡¶ø‡¶≤‡¶≤‡ßá
            document.getElementById('loginMessage').innerText = '‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!';
        }

        // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶≤‡¶ó‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
        async function loadDataForLogin() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: { 'X-Master-Key': MASTER_KEY }
                });
                
                const data = await response.json();
                usersData = data.record;
                
                if(!usersData.users) usersData.users = [];
                if(!usersData.resellers) usersData.resellers = [];
                
            } catch(error) {
                console.log('‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:', error);
            }
        }

        // ‡¶ö‡ßá‡¶ï ‡¶≤‡¶ó‡¶ø‡¶®
        function checkLogin() {
            const savedUser = sessionStorage.getItem('currentUser');
            if(savedUser) {
                currentUser = JSON.parse(savedUser);
                loadDashboard();
            }
        }

        // ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶≤‡ßã‡¶°
        async function loadDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            document.getElementById('usernameDisplay').innerText = currentUser.username;
            document.getElementById('userRoleBadge').innerText = 
                currentUser.role === 'admin' ? 'üëë ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®' : 'üîÑ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞';
            
            // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶π‡¶≤‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®, ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
            if(currentUser.role === 'admin') {
                document.getElementById('createResellerCard').style.display = 'block';
            } else {
                document.getElementById('createResellerCard').style.display = 'none';
            }
            
            await loadData();
        }

        // JSONBin ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
        async function loadData() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: { 'X-Master-Key': MASTER_KEY }
                });
                
                const data = await response.json();
                usersData = data.record;
                
                if(!usersData.users) usersData.users = [];
                if(!usersData.resellers) usersData.resellers = [];
                
                updateStats();
                displayUsers();
                displayResellers();
                
            } catch(error) {
                alert('‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ!');
            }
        }

        // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        function updateStats() {
            const today = new Date();
            
            const totalUsers = usersData.users.length;
            const totalResellers = usersData.resellers.length;
            const activeUsers = usersData.users.filter(u => new Date(u.expireDate) >= today).length;
            const expiredUsers = totalUsers - activeUsers;
            
            document.getElementById('totalUsers').innerText = totalUsers;
            document.getElementById('totalResellers').innerText = totalResellers;
            document.getElementById('activeUsers').innerText = activeUsers;
            document.getElementById('expiredUsers').innerText = expiredUsers;
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶π‡¶≤‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
            if(currentUser.role !== 'admin') {
                const reseller = usersData.resellers.find(r => r.username === currentUser.username);
                if(reseller) {
                    const used = usersData.users.filter(u => u.createdBy === currentUser.username).length;
                    const left = reseller.userLimit - used;
                    document.getElementById('userLimitMessage').innerHTML = 
                        `üìä ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü: ${used}/${reseller.userLimit} (‡¶¨‡¶æ‡¶ï‡¶ø: ${left})`;
                }
            }
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá
        function displayUsers() {
            const tbody = document.getElementById('userTableBody');
            const today = new Date();
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶π‡¶≤‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            let filteredUsers = usersData.users;
            if(currentUser.role === 'reseller') {
                filteredUsers = usersData.users.filter(u => u.createdBy === currentUser.username);
            }
            
            if(filteredUsers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">‡¶ï‡ßã‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            
            filteredUsers.forEach((user, index) => {
                const expireDate = new Date(user.expireDate);
                const status = expireDate >= today ? 'status-active' : 'status-expired';
                const statusText = expireDate >= today ? '‚úÖ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‚ùå ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£';
                
                const row = `<tr>
                    <td>${user.username}</td>
                    <td>${user.expireDate}</td>
                    <td>${user.currentDevices ? user.currentDevices.length : 0}/${user.deviceLimit === 999 ? '‚àû' : user.deviceLimit}</td>
                    <td>${user.createdBy || '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®'}</td>
                    <td class="${status}">${statusText}</td>
                    <td><button class="small-btn" onclick="deleteUser('${user.username}')">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button></td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá
        function displayResellers() {
            const tbody = document.getElementById('resellerTableBody');
            
            if(!usersData.resellers || usersData.resellers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4">‡¶ï‡ßã‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            
            usersData.resellers.forEach((reseller, index) => {
                const used = usersData.users.filter(u => u.createdBy === reseller.username).length;
                
                const row = `<tr>
                    <td>${reseller.username}</td>
                    <td>${reseller.userLimit}</td>
                    <td>${used}</td>
                    <td>
                        ${currentUser.role === 'admin' ? 
                            `<button class="small-btn" onclick="deleteReseller('${reseller.username}')">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>` : 
                            '---'}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®)
        async function createReseller() {
            if(currentUser.role !== 'admin') {
                alert('‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            const username = document.getElementById('resellerUsername').value;
            const password = document.getElementById('resellerPassword').value;
            const userLimit = parseInt(document.getElementById('resellerUserLimit').value);
            
            if(!username) {
                alert('‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
            if(usersData.resellers.find(r => r.username === username)) {
                alert('‡¶è‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶Ü‡¶õ‡ßá!');
                return;
            }
            
            const newReseller = {
                username: username,
                password: password,
                userLimit: userLimit,
                createdAt: new Date().toISOString()
            };
            
            usersData.resellers.push(newReseller);
            await updateJSONBin();
            
            document.getElementById('resellerUsername').value = '';
            displayResellers();
            updateStats();
            alert('‚úÖ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø
        async function createUser() {
            const username = document.getElementById('username').value;
            const expireDate = document.getElementById('expireDate').value;
            const deviceLimit = document.getElementById('deviceLimit').value;
            
            if(!username || !expireDate) {
                alert('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!');
                return;
            }
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶π‡¶≤‡ßá ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶ö‡ßá‡¶ï
            if(currentUser.role !== 'admin') {
                const reseller = usersData.resellers.find(r => r.username === currentUser.username);
                if(reseller) {
                    const used = usersData.users.filter(u => u.createdBy === currentUser.username).length;
                    if(used >= reseller.userLimit) {
                        alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑!');
                        return;
                    }
                }
            }
            
            // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
            if(usersData.users.find(u => u.username === username)) {
                alert('‡¶è‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶Ü‡¶õ‡ßá!');
                return;
            }
            
            const newUser = {
                username: username,
                expireDate: expireDate,
                deviceLimit: parseInt(deviceLimit),
                currentDevices: [],
                createdBy: currentUser.username,
                createdAt: new Date().toISOString()
            };
            
            usersData.users.push(newUser);
            await updateJSONBin();
            
            document.getElementById('username').value = '';
            document.getElementById('expireDate').value = '';
            
            displayUsers();
            updateStats();
            alert('‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
        async function deleteUser(username) {
            if(confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ${username} ‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                usersData.users = usersData.users.filter(u => u.username !== username);
                await updateJSONBin();
                displayUsers();
                updateStats();
            }
        }

        // ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®)
        async function deleteReseller(username) {
            if(currentUser.role !== 'admin') {
                alert('‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            if(confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ${username} ‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                usersData.resellers = usersData.resellers.filter(r => r.username !== username);
                await updateJSONBin();
                displayResellers();
                updateStats();
            }
        }

        // JSONBin ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        async function updateJSONBin() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'X-Master-Key': MASTER_KEY,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(usersData)
                });
                
                if(!response.ok) {
                    throw new Error('‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•');
                }
                
            } catch(error) {
                alert('JSONBin ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ!');
            }
        }

        // ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
        function logout() {
            sessionStorage.removeItem('currentUser');
            location.reload();
        }
    </script>
</body>
</html>