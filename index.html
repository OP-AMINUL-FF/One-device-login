<!DOCTYPE html>
<html lang="bn" id="htmlTag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëë ULTRA PRO MAX V4 - ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</title>
    <!-- ‡¶´‡¶®‡ßç‡¶ü ‡¶Ö‡¶æ‡¶ì‡¶∏‡¶æ‡¶Æ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- ‡¶ö‡¶æ‡¶∞‡ßç‡¶ü ‡¶ú‡ßá‡¶è‡¶∏ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* ‡¶•‡¶ø‡¶Æ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ */
        :root {
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-color: #fff;
            --border-color: rgba(255,255,255,0.1);
            --accent: #00d4ff;
            --accent-dark: #0066ff;
            --danger: #ff6b6b;
            --success: #00ff88;
            --warning: #ffaa00;
            --purple: #9d4edd;
        }
        
        /* ‡¶≤‡¶æ‡¶á‡¶ü ‡¶•‡¶ø‡¶Æ */
        [data-theme="light"] {
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card-bg: rgba(255, 255, 255, 0.9);
            --text-color: #333;
            --border-color: rgba(0,0,0,0.1);
            --accent: #0066ff;
        }
        
        body {
            background: var(--bg-gradient);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
        }
        
        /* ‡¶≤‡¶ó‡¶ø‡¶® ‡¶™‡ßá‡¶ú */
        .login-container {
            max-width: 450px;
            margin: 50px auto;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 1px solid var(--border-color);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header h1 {
            color: var(--accent);
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .login-header p {
            opacity: 0.8;
        }
        
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent);
        }
        
        .input-group input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            color: var(--text-color);
            font-size: 1em;
        }
        
        .btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            border: none;
            border-radius: 15px;
            color: #fff;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,212,255,0.4);
        }
        
        .btn-small {
            padding: 10px 20px;
            font-size: 0.9em;
            width: auto;
        }
        
        /* ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° */
        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
            display: none;
        }
        
        /* ‡¶®‡ßá‡¶≠ ‡¶¨‡¶æ‡¶∞ */
        .navbar {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px 25px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .logo h2 {
            color: var(--accent);
            font-size: 1.5em;
        }
        
        .nav-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .theme-toggle {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .badge {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: bold;
        }
        
        .logout-btn {
            background: rgba(255,0,0,0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
            padding: 8px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: var(--danger);
            color: #fff;
        }
        
        /* ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶∏ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }
        
        .stat-info h3 {
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .stat-info .number {
            font-size: 1.8em;
            font-weight: bold;
        }
        
        /* JSONBin ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° */
        .jsonbin-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            color: white;
            border: 1px solid var(--border-color);
        }
        
        .jsonbin-info h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 10px 20px;
            margin-bottom: 15px;
        }
        
        .info-label {
            font-weight: bold;
            opacity: 0.9;
        }
        
        .info-value {
            font-family: monospace;
            background: rgba(0,0,0,0.3);
            padding: 5px 10px;
            border-radius: 5px;
            word-break: break-all;
        }
        
        .copy-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid white;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
        }
        
        .copy-btn:hover {
            background: white;
            color: #667eea;
        }
        
        /* ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® */
        .notification-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .notification-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid var(--border-color);
        }
        
        .notification-card h2 {
            color: var(--accent);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-color);
            cursor: pointer;
            flex: 1;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            border: none;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-color);
            font-size: 1em;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â */
        .notification-preview {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }
        
        .preview-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .preview-body {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        
        .preview-image {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-content {
            flex: 1;
        }
        
        .preview-message {
            margin-bottom: 10px;
        }
        
        .preview-link {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            text-decoration: none;
            color: var(--accent);
        }
        
        /* ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü */
        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .notification-item {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .notification-item:hover {
            transform: translateX(5px);
            border-color: var(--accent);
        }
        
        .notification-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .notification-badge {
            font-size: 0.75em;
            padding: 3px 10px;
            border-radius: 50px;
        }
        
        .badge-normal {
            background: var(--accent);
        }
        
        .badge-advance {
            background: var(--purple);
        }
        
        .notification-time {
            font-size: 0.8em;
            opacity: 0.6;
        }
        
        .notification-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .notification-item-preview {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .notification-resource {
            font-size: 0.8em;
            color: var(--accent);
        }
        
        /* ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ */
        .table-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid var(--border-color);
            margin-bottom: 25px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            text-align: left;
            padding: 15px 10px;
            color: var(--accent);
            border-bottom: 2px solid var(--border-color);
        }
        
        td {
            padding: 12px 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .status-active {
            color: var(--success);
        }
        
        .status-expired {
            color: var(--danger);
        }
        
        .small-btn {
            padding: 6px 12px;
            background: rgba(255,0,0,0.1);
            border: 1px solid var(--danger);
            border-radius: 8px;
            color: var(--danger);
            cursor: pointer;
            font-size: 0.9em;
            margin: 2px;
        }
        
        .small-btn:hover {
            background: var(--danger);
            color: #fff;
        }
        
        .small-btn-success {
            border-color: var(--success);
            color: var(--success);
            background: rgba(0,255,0,0.1);
        }
        
        .small-btn-success:hover {
            background: var(--success);
            color: #fff;
        }
        
        .search-box {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-color);
        }
        
        /* ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ü‡ßã‡¶∏‡ßç‡¶ü */
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 12px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-left: 4px solid var(--accent);
            color: var(--text-color);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 350px;
        }
        
        .notification-toast.show {
            transform: translateX(0);
        }
        
        .toast-image {
            width: 100%;
            max-height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .notification-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ü‡ßã‡¶∏‡ßç‡¶ü -->
    <div id="notificationToast" class="notification-toast">
        <div id="toastContent"></div>
    </div>

    <!-- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶™‡ßá‡¶ú -->
    <div id="loginPage" class="login-container">
        <div class="login-header">
            <h1><i class="fas fa-crown"></i> ULTRA PRO MAX V4</h1>
            <p>JSONBin ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶∏‡¶π ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</p>
        </div>
        <div class="login-form">
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="adminUsername" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ">
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="adminPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°">
            </div>
            <button class="btn" onclick="adminLogin()"><i class="fas fa-sign-in-alt"></i> ‡¶≤‡¶ó‡¶ø‡¶®</button>
        </div>
        <div id="loginMessage" style="color: var(--danger); text-align: center; margin-top: 15px;"></div>
    </div>

    <!-- ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° -->
    <div id="dashboard" class="dashboard">
        <!-- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ -->
        <div class="navbar">
            <div class="logo">
                <h2><i class="fas fa-crown" style="color: var(--accent);"></i> ULTRA PRO MAX V4</h2>
            </div>
            <div class="nav-controls">
                <div class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-sun"></i> <i class="fas fa-moon"></i>
                </div>
                <div class="user-profile">
                    <span class="badge" id="userRoleBadge">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</span>
                    <span><i class="fas fa-user-circle"></i> <span id="usernameDisplay">admin54</span></span>
                    <span class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</span>
                </div>
            </div>
        </div>

        <!-- ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶∏ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-users"></i></div>
                <div class="stat-info">
                    <h3>‡¶Æ‡ßã‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
                    <div class="number" id="totalUsers">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-user-tie"></i></div>
                <div class="stat-info">
                    <h3>‡¶Æ‡ßã‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞</h3>
                    <div class="number" id="totalResellers">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                <div class="stat-info">
                    <h3>‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
                    <div class="number" id="activeUsers">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-exclamation-circle"></i></div>
                <div class="stat-info">
                    <h3>‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£</h3>
                    <div class="number" id="expiredUsers">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-bell"></i></div>
                <div class="stat-info">
                    <h3>‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</h3>
                    <div class="number" id="totalNotifications">0</div>
                </div>
            </div>
        </div>

        <!-- JSONBin ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° -->
        <div class="jsonbin-info">
            <h3><i class="fas fa-database"></i> JSONBin ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡¶•‡ßç‡¶Ø</h3>
            <div class="info-grid">
                <div class="info-label">Bin ID:</div>
                <div class="info-value" id="binIdDisplay">6995dc7fd0ea881f40c440b9</div>
                
                <div class="info-label">Master Key:</div>
                <div class="info-value" id="masterKeyDisplay">$2a$10$LQXgZvaxJNdPrYE3Ez/tHe09U9/NFnBYpAzlNBPeFLBG51CluFTB2</div>
                
                <div class="info-label">API URL:</div>
                <div class="info-value">https://api.jsonbin.io/v3/b/6995dc7fd0ea881f40c440b9</div>
                
                <div class="info-label">‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞:</div>
                <div class="info-value">
                    <pre style="margin:0; background:rgba(0,0,0,0.3); padding:10px; border-radius:5px;">
{
  "users": [],
  "resellers": [],
  "notifications": []
}
                    </pre>
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="copy-btn" onclick="copyBinId()"><i class="fas fa-copy"></i> Bin ID ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button class="copy-btn" onclick="copyMasterKey()"><i class="fas fa-copy"></i> Master Key ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button class="copy-btn" onclick="testConnection()"><i class="fas fa-plug"></i> ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ü‡ßá‡¶∏‡ßç‡¶ü</button>
            </div>
            <div id="connectionTestResult" style="margin-top: 10px; font-size: 0.9em;"></div>
        </div>

        <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div class="notification-section">
            <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶§‡ßà‡¶∞‡¶ø -->
            <div class="notification-card">
                <h2><i class="fas fa-paper-plane"></i> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®</h2>
                
                <div class="notification-tabs">
                    <button class="tab-btn active" onclick="switchNotificationTab('normal')">‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤</button>
                    <button class="tab-btn" onclick="switchNotificationTab('advance')">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶°</button>
                </div>

                <!-- ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® -->
                <div id="normalTab" class="tab-content active">
                    <div class="form-group">
                        <label>‡¶™‡¶æ‡¶†‡¶æ‡¶®</label>
                        <select id="notifyToNormal">
                            <option value="all">‡¶∏‡¶¨‡¶æ‡¶á</option>
                            <option value="admins">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</option>
                            <option value="resellers">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞</option>
                            <option value="users">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤</label>
                        <input type="text" id="normalTitle" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">
                    </div>
                    <div class="form-group">
                        <label>‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</label>
                        <textarea id="normalMessage" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£"></textarea>
                    </div>
                    <button class="btn btn-small" onclick="sendNormalNotification()">
                        <i class="fas fa-paper-plane"></i> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                    </button>
                </div>

                <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® -->
                <div id="advanceTab" class="tab-content">
                    <div class="form-group">
                        <label>‡¶™‡¶æ‡¶†‡¶æ‡¶®</label>
                        <select id="notifyToAdvance">
                            <option value="all">‡¶∏‡¶¨‡¶æ‡¶á</option>
                            <option value="admins">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</option>
                            <option value="resellers">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞</option>
                            <option value="users">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤</label>
                        <input type="text" id="advanceTitle" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">
                    </div>
                    <div class="form-group">
                        <label>‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</label>
                        <textarea id="advanceMessage" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£"></textarea>
                    </div>
                    <div class="form-group">
                        <label>‡¶á‡¶Æ‡ßá‡¶ú ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                        <input type="url" id="advanceImage" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label>‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶ü‡¶æ‡¶á‡¶™</label>
                        <select id="resourceType">
                            <option value="none">‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶®‡¶æ</option>
                            <option value="update">üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü</option>
                            <option value="video">üé• ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</option>
                            <option value="website">üåê ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü</option>
                            <option value="offer">üéÅ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶´‡¶æ‡¶∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶≤‡¶ø‡¶Ç‡¶ï</label>
                        <input type="url" id="resourceLink" placeholder="https://example.com">
                    </div>
                    <button class="btn btn-small" onclick="sendAdvanceNotification()">
                        <i class="fas fa-paper-plane"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                    </button>
                </div>

                <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â -->
                <div class="notification-preview" id="notificationPreview">
                    <div class="preview-title">üì± ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</div>
                    <div class="preview-body">
                        <div class="preview-image" id="previewImageBox">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="preview-content">
                            <div class="preview-message" id="previewMessage">
                                <strong>‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤:</strong> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤<br>
                                <strong>‡¶Æ‡ßá‡¶∏‡ßá‡¶ú:</strong> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
                            </div>
                            <div class="preview-link" id="previewLink"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü -->
            <div class="notification-card">
                <h2><i class="fas fa-history"></i> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</h2>
                <div class="notification-list" id="notificationList">
                    <div style="text-align: center; padding: 20px;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                </div>
            </div>
        </div>

        <!-- ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®) -->
        <div class="notification-card" id="createResellerCard">
            <h2><i class="fas fa-user-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø</h2>
            <div class="form-group">
                <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</label>
                <input type="text" id="resellerUsername" placeholder="reseller_name">
            </div>
            <div class="form-group">
                <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°</label>
                <input type="text" id="resellerPassword" value="reseller123">
            </div>
            <div class="form-group">
                <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü</label>
                <input type="number" id="resellerUserLimit" value="5" min="1" max="1000">
            </div>
            <button class="btn" onclick="createReseller()"><i class="fas fa-save"></i> ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <!-- ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø -->
        <div class="notification-card" id="createUserCard">
            <h2><i class="fas fa-user-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø</h2>
            <div class="form-group">
                <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</label>
                <input type="text" id="username" placeholder="username">
            </div>
            <div class="form-group">
                <label>‡¶è‡¶ï‡ßç‡¶∏‡¶™‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                <input type="date" id="expireDate">
            </div>
            <div class="form-group">
                <label>‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü</label>
                <select id="deviceLimit">
                    <option value="1">‡ßß‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                    <option value="2">‡ß®‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                    <option value="3">‡ß©‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                    <option value="5">‡ß´‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                    <option value="10">‡ßß‡ß¶‡¶ü‡¶ø ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</option>
                    <option value="999">‡¶Ü‡¶®‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶°</option>
                </select>
            </div>
            <button class="btn" onclick="createUser()"><i class="fas fa-save"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <div id="userLimitMessage" style="color: var(--warning); margin-top: 10px;"></div>
        </div>

        <!-- ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div class="table-container">
            <h2><i class="fas fa-list"></i> ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
            <table>
                <thead>
                    <tr>
                        <th>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</th>
                        <th>‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü</th>
                        <th>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</th>
                        <th>‡¶¨‡¶æ‡¶ï‡¶ø</th>
                        <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                    </tr>
                </thead>
                <tbody id="resellerTableBody">
                    <tr><td colspan="5">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h2><i class="fas fa-list"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
            <table id="userTable">
                <thead>
                    <tr>
                        <th>‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</th>
                        <th>‡¶è‡¶ï‡ßç‡¶∏‡¶™‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞</th>
                        <th>‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏</th>
                        <th>‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶ü‡¶∞</th>
                        <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                        <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                    </tr>
                </thead>
                <tbody id="userTableBody">
                    <tr><td colspan="6">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ========== JSONBin ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ==========
        const BIN_ID = "6995dc7fd0ea881f40c440b9";
        const MASTER_KEY = "$2a$10$LQXgZvaxJNdPrYE3Ez/tHe09U9/NFnBYpAzlNBPeFLBG51CluFTB2";
        
        // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
        let currentUser = null;
        let usersData = { 
            users: [], 
            resellers: [],
            notifications: [] 
        };
        
        const ADMIN_USERNAME = "admin54";
        const ADMIN_PASSWORD = "admin54";

        // ========== JSONBin ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ==========
        function copyBinId() {
            navigator.clipboard.writeText(BIN_ID);
            showToast("‚úÖ Bin ID ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
        }
        
        function copyMasterKey() {
            navigator.clipboard.writeText(MASTER_KEY);
            showToast("‚úÖ Master Key ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
        }
        
        async function testConnection() {
            const resultDiv = document.getElementById('connectionTestResult');
            resultDiv.innerHTML = "‚è≥ ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: { 'X-Master-Key': MASTER_KEY }
                });
                
                if(response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = "‚úÖ ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶∏‡¶´‡¶≤! JSONBin ‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá‡•§";
                    showToast("‚úÖ JSONBin ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
                } else {
                    resultDiv.innerHTML = "‚ùå ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•! ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: " + response.status;
                }
            } catch(error) {
                resultDiv.innerHTML = "‚ùå ‡¶è‡¶∞‡¶∞: " + error.message;
            }
        }

        // ‡¶•‡¶ø‡¶Æ ‡¶ü‡¶ó‡¶≤
        function toggleTheme() {
            const html = document.getElementById('htmlTag');
            const currentTheme = html.getAttribute('data-theme');
            if(currentTheme === 'light') {
                html.removeAttribute('data-theme');
                showToast('‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            } else {
                html.setAttribute('data-theme', 'light');
                showToast('‡¶≤‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            }
        }

        // ‡¶ü‡ßã‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
        function showToast(message) {
            const toast = document.getElementById('notificationToast');
            const content = document.getElementById('toastContent');
            content.innerHTML = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶∏‡ßÅ‡¶á‡¶ö
        function switchNotificationTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            if(tab === 'normal') {
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
                document.getElementById('normalTab').classList.add('active');
            } else {
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
                document.getElementById('advanceTab').classList.add('active');
            }
        }

        // ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        function updatePreview() {
            const activeTab = document.querySelector('.tab-content.active').id;
            const previewMsg = document.getElementById('previewMessage');
            const previewLink = document.getElementById('previewLink');
            const previewImage = document.getElementById('previewImageBox');
            
            if(activeTab === 'normalTab') {
                const title = document.getElementById('normalTitle').value || '‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®';
                const msg = document.getElementById('normalMessage').value || '‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú';
                previewMsg.innerHTML = `<strong>${title}</strong><br>${msg}`;
                previewLink.innerHTML = '';
                previewImage.innerHTML = '<i class="fas fa-image"></i>';
            } else {
                const title = document.getElementById('advanceTitle').value || '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®';
                const msg = document.getElementById('advanceMessage').value || '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú';
                const resourceLink = document.getElementById('resourceLink').value;
                const imageLink = document.getElementById('advanceImage').value;
                
                previewMsg.innerHTML = `<strong>${title}</strong><br>${msg}`;
                
                if(imageLink) {
                    previewImage.innerHTML = `<img src="${imageLink}" style="width: 80px; height: 80px; border-radius: 10px; object-fit: cover;">`;
                } else {
                    previewImage.innerHTML = '<i class="fas fa-image"></i>';
                }
                
                if(resourceLink) {
                    previewLink.innerHTML = `üîó <a href="${resourceLink}" target="_blank">${resourceLink.substring(0,30)}...</a>`;
                } else {
                    previewLink.innerHTML = '';
                }
            }
        }

        // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
        document.getElementById('normalTitle')?.addEventListener('input', updatePreview);
        document.getElementById('normalMessage')?.addEventListener('input', updatePreview);
        document.getElementById('advanceTitle')?.addEventListener('input', updatePreview);
        document.getElementById('advanceMessage')?.addEventListener('input', updatePreview);
        document.getElementById('advanceImage')?.addEventListener('input', updatePreview);
        document.getElementById('resourceType')?.addEventListener('change', updatePreview);
        document.getElementById('resourceLink')?.addEventListener('input', updatePreview);

        window.onload = function() {
            checkLogin();
        };

        async function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            await loadDataForLogin();
            
            if(username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                currentUser = {
                    username: username,
                    role: 'admin',
                    userLimit: 999999
                };
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                showToast('‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®!');
                loadDashboard();
                return;
            }
            
            if(usersData.resellers && usersData.resellers.length > 0) {
                const reseller = usersData.resellers.find(r => r.username === username && r.password === password);
                if(reseller) {
                    currentUser = {
                        username: reseller.username,
                        role: 'reseller',
                        userLimit: reseller.userLimit
                    };
                    sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showToast('‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞!');
                    loadDashboard();
                    return;
                }
            }
            
            document.getElementById('loginMessage').innerText = '‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!';
            showToast('‡¶≤‡¶ó‡¶ø‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•!');
        }

        async function loadDataForLogin() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: { 'X-Master-Key': MASTER_KEY }
                });
                const data = await response.json();
                usersData = data.record;
                if(!usersData.users) usersData.users = [];
                if(!usersData.resellers) usersData.resellers = [];
                if(!usersData.notifications) usersData.notifications = [];
            } catch(error) {
                console.log('‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:', error);
            }
        }

        function checkLogin() {
            const savedUser = sessionStorage.getItem('currentUser');
            if(savedUser) {
                currentUser = JSON.parse(savedUser);
                loadDashboard();
            }
        }

        async function loadDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            document.getElementById('usernameDisplay').innerText = currentUser.username;
            document.getElementById('userRoleBadge').innerText = 
                currentUser.role === 'admin' ? 'üëë ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®' : 'üîÑ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞';
            
            document.getElementById('createResellerCard').style.display = 
                currentUser.role === 'admin' ? 'block' : 'none';
            
            await loadData();
        }

        async function loadData() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: { 'X-Master-Key': MASTER_KEY }
                });
                const data = await response.json();
                usersData = data.record;
                
                if(!usersData.users) usersData.users = [];
                if(!usersData.resellers) usersData.resellers = [];
                if(!usersData.notifications) usersData.notifications = [];
                
                updateStats();
                displayUsers();
                displayResellers();
                displayNotifications();
                
            } catch(error) {
                showToast('‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ!');
            }
        }

        function updateStats() {
            const today = new Date();
            today.setHours(0,0,0,0);
            
            const totalUsers = usersData.users.length;
            const totalResellers = usersData.resellers.length;
            const activeUsers = usersData.users.filter(u => new Date(u.expireDate) >= today).length;
            const expiredUsers = totalUsers - activeUsers;
            const totalNotifications = usersData.notifications.length;
            
            document.getElementById('totalUsers').innerText = totalUsers;
            document.getElementById('totalResellers').innerText = totalResellers;
            document.getElementById('activeUsers').innerText = activeUsers;
            document.getElementById('expiredUsers').innerText = expiredUsers;
            document.getElementById('totalNotifications').innerText = totalNotifications;
            
            if(currentUser.role !== 'admin') {
                const reseller = usersData.resellers.find(r => r.username === currentUser.username);
                if(reseller) {
                    const used = usersData.users.filter(u => u.createdBy === currentUser.username).length;
                    const left = reseller.userLimit - used;
                    document.getElementById('userLimitMessage').innerHTML = 
                        `<i class="fas fa-info-circle"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü: ${used}/${reseller.userLimit} (‡¶¨‡¶æ‡¶ï‡¶ø: ${left})`;
                }
            }
        }

        function displayUsers() {
            const tbody = document.getElementById('userTableBody');
            const today = new Date();
            today.setHours(0,0,0,0);
            
            let filteredUsers = usersData.users;
            if(currentUser.role === 'reseller') {
                filteredUsers = usersData.users.filter(u => u.createdBy === currentUser.username);
            }
            
            if(filteredUsers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">‡¶ï‡ßã‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            
            filteredUsers.forEach(user => {
                const expireDate = new Date(user.expireDate);
                expireDate.setHours(0,0,0,0);
                const status = expireDate >= today ? 'status-active' : 'status-expired';
                const statusText = expireDate >= today ? '‚úÖ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‚ùå ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£';
                
                const row = `<tr>
                    <td><i class="fas fa-user"></i> ${user.username}</td>
                    <td>${user.expireDate}</td>
                    <td>${user.currentDevices ? user.currentDevices.length : 0}/${user.deviceLimit === 999 ? '‚àû' : user.deviceLimit}</td>
                    <td>${user.createdBy || '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®'}</td>
                    <td class="${status}">${statusText}</td>
                    <td>
                        <button class="small-btn" onclick="deleteUser('${user.username}')"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        function displayResellers() {
            const tbody = document.getElementById('resellerTableBody');
            
            if(!usersData.resellers || usersData.resellers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5">‡¶ï‡ßã‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            
            usersData.resellers.forEach(reseller => {
                const used = usersData.users.filter(u => u.createdBy === reseller.username).length;
                const left = reseller.userLimit - used;
                
                const row = `<tr>
                    <td><i class="fas fa-user-tie"></i> ${reseller.username}</td>
                    <td>${reseller.userLimit}</td>
                    <td>${used}</td>
                    <td><span style="color: ${left > 0 ? 'var(--success)' : 'var(--danger)'};">${left}</span></td>
                    <td>
                        ${currentUser.role === 'admin' ? 
                            `<button class="small-btn" onclick="deleteReseller('${reseller.username}')"><i class="fas fa-trash"></i></button>` : 
                            '---'}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        function displayNotifications() {
            const list = document.getElementById('notificationList');
            
            if(!usersData.notifications || usersData.notifications.length === 0) {
                list.innerHTML = '<div style="text-align: center; padding: 20px;">‡¶ï‡ßã‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶®‡ßá‡¶á</div>';
                return;
            }
            
            list.innerHTML = '';
            
            usersData.notifications.slice().reverse().forEach(notif => {
                const time = new Date(notif.timestamp).toLocaleString();
                
                const item = document.createElement('div');
                item.className = 'notification-item';
                item.onclick = () => showNotificationDetails(notif);
                
                let content = `
                    <div class="notification-item-header">
                        <span class="notification-badge ${notif.type === 'advance' ? 'badge-advance' : 'badge-normal'}">${notif.type === 'advance' ? 'üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶°' : 'üìù ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤'}</span>
                        <span class="notification-time">${time}</span>
                    </div>
                    <div class="notification-item-title">${notif.title}</div>
                    <div class="notification-item-preview">${notif.message.substring(0,50)}${notif.message.length > 50 ? '...' : ''}</div>
                `;
                
                if(notif.resourceLink) {
                    content += `<div class="notification-resource"><i class="fas fa-link"></i> ‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶∏‡¶π</div>`;
                }
                
                content += `<div style="font-size: 0.8em; margin-top: 5px;">‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ${notif.sentTo}</div>`;
                
                item.innerHTML = content;
                list.appendChild(item);
            });
        }

        function showNotificationDetails(notif) {
            let details = `üì¢ ${notif.title}\n\n${notif.message}`;
            if(notif.imageLink) details += `\n\nüñºÔ∏è ‡¶á‡¶Æ‡ßá‡¶ú: ${notif.imageLink}`;
            if(notif.resourceLink) details += `\n\nüîó ‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏: ${notif.resourceLink}`;
            details += `\n\nüë• ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ${notif.sentTo}\n‚è∞ ‡¶∏‡¶Æ‡¶Ø‡¶º: ${new Date(notif.timestamp).toLocaleString()}`;
            alert(details);
        }

        async function sendNormalNotification() {
            const to = document.getElementById('notifyToNormal').value;
            const title = document.getElementById('normalTitle').value;
            const message = document.getElementById('normalMessage').value;
            
            if(!title || !message) {
                showToast('‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ì ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            let sentToText = '';
            switch(to) {
                case 'all': sentToText = '‡¶∏‡¶¨‡¶æ‡¶á'; break;
                case 'admins': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®'; break;
                case 'resellers': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞'; break;
                case 'users': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞'; break;
            }
            
            const notification = {
                id: Date.now(),
                type: 'normal',
                title: title,
                message: message,
                sentTo: sentToText,
                target: to,
                timestamp: new Date().toISOString()
            };
            
            if(!usersData.notifications) usersData.notifications = [];
            usersData.notifications.push(notification);
            
            await updateJSONBin();
            
            document.getElementById('normalTitle').value = '';
            document.getElementById('normalMessage').value = '';
            
            displayNotifications();
            showToast(`‚úÖ ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (${sentToText})`);
        }

        async function sendAdvanceNotification() {
            const to = document.getElementById('notifyToAdvance').value;
            const title = document.getElementById('advanceTitle').value;
            const message = document.getElementById('advanceMessage').value;
            const imageLink = document.getElementById('advanceImage').value;
            const resourceType = document.getElementById('resourceType').value;
            const resourceLink = document.getElementById('resourceLink').value;
            
            if(!title || !message) {
                showToast('‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ì ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            let sentToText = '';
            switch(to) {
                case 'all': sentToText = '‡¶∏‡¶¨‡¶æ‡¶á'; break;
                case 'admins': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®'; break;
                case 'resellers': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞'; break;
                case 'users': sentToText = '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞'; break;
            }
            
            let resourceTypeText = '';
            switch(resourceType) {
                case 'update': resourceTypeText = 'üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü'; break;
                case 'video': resourceTypeText = 'üé• ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì'; break;
                case 'website': resourceTypeText = 'üåê ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü'; break;
                case 'offer': resourceTypeText = 'üéÅ ‡¶Ö‡¶´‡¶æ‡¶∞'; break;
                default: resourceTypeText = '‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶®‡¶æ';
            }
            
            const notification = {
                id: Date.now(),
                type: 'advance',
                title: title,
                message: message,
                imageLink: imageLink || null,
                resourceType: resourceTypeText,
                resourceLink: resourceLink || null,
                sentTo: sentToText,
                target: to,
                timestamp: new Date().toISOString()
            };
            
            if(!usersData.notifications) usersData.notifications = [];
            usersData.notifications.push(notification);
            
            await updateJSONBin();
            
            document.getElementById('advanceTitle').value = '';
            document.getElementById('advanceMessage').value = '';
            document.getElementById('advanceImage').value = '';
            document.getElementById('resourceType').value = 'none';
            document.getElementById('resourceLink').value = '';
            
            displayNotifications();
            showToast(`‚úÖ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (${sentToText})`);
        }

        async function createReseller() {
            if(currentUser.role !== 'admin') {
                showToast('‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            const username = document.getElementById('resellerUsername').value;
            const password = document.getElementById('resellerPassword').value;
            const userLimit = parseInt(document.getElementById('resellerUserLimit').value);
            
            if(!username) {
                showToast('‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¶‡¶ø‡¶®!');
                return;
            }
            
            if(usersData.resellers.find(r => r.username === username)) {
                showToast('‡¶è‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶Ü‡¶õ‡ßá!');
                return;
            }
            
            const newReseller = {
                username: username,
                password: password,
                userLimit: userLimit,
                createdAt: new Date().toISOString()
            };
            
            usersData.resellers.push(newReseller);
            await updateJSONBin();
            
            document.getElementById('resellerUsername').value = '';
            displayResellers();
            updateStats();
            showToast('‚úÖ ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        async function createUser() {
            const username = document.getElementById('username').value;
            const expireDate = document.getElementById('expireDate').value;
            const deviceLimit = document.getElementById('deviceLimit').value;
            
            if(!username || !expireDate) {
                showToast('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!');
                return;
            }
            
            if(currentUser.role !== 'admin') {
                const reseller = usersData.resellers.find(r => r.username === currentUser.username);
                if(reseller) {
                    const used = usersData.users.filter(u => u.createdBy === currentUser.username).length;
                    if(used >= reseller.userLimit) {
                        showToast('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑!');
                        return;
                    }
                }
            }
            
            if(usersData.users.find(u => u.username === username)) {
                showToast('‡¶è‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶Ü‡¶õ‡ßá!');
                return;
            }
            
            const newUser = {
                username: username,
                expireDate: expireDate,
                deviceLimit: parseInt(deviceLimit),
                currentDevices: [],
                createdBy: currentUser.username,
                createdAt: new Date().toISOString()
            };
            
            usersData.users.push(newUser);
            await updateJSONBin();
            
            document.getElementById('username').value = '';
            document.getElementById('expireDate').value = '';
            
            displayUsers();
            updateStats();
            showToast('‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        async function deleteUser(username) {
            if(confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ${username} ‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                usersData.users = usersData.users.filter(u => u.username !== username);
                await updateJSONBin();
                displayUsers();
                updateStats();
                showToast('üóëÔ∏è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }
        }

        async function deleteReseller(username) {
            if(currentUser.role !== 'admin') {
                showToast('‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            if(confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ${username} ‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                usersData.resellers = usersData.resellers.filter(r => r.username !== username);
                await updateJSONBin();
                displayResellers();
                updateStats();
                showToast('üóëÔ∏è ‡¶∞‡¶ø‡¶∏‡ßá‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }
        }

        async function updateJSONBin() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'X-Master-Key': MASTER_KEY,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(usersData)
                });
                
                if(!response.ok) {
                    throw new Error('‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•');
                }
                
            } catch(error) {
                showToast('JSONBin ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ!');
            }
        }

        function logout() {
            sessionStorage.removeItem('currentUser');
            showToast('‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            location.reload();
        }
    </script>
</body>
</html>